# PDCA Do - 구현 현황 체크리스트

## 완료된 구현 (Do - Done)

### 인증 & 보안
- [x] Kakao OAuth 로그인
- [x] Google OAuth 로그인 (선택적)
- [x] NextAuth.js 커스텀 어댑터 (AuthSession 테이블)
- [x] 모든 쓰기 API에 인증 추가
- [x] 소유자 검증 (작품/캐릭터/로어북/오프닝)
- [x] 채팅 세션 소유자 확인
- [x] 메시지 길이 제한 (5000자)
- [x] 파일 업로드 타입/크기 검증

### 작품 관리
- [x] 작품 CRUD (제목, 설명, 태그, 썸네일, 가시성, 대상, 성인 여부)
- [x] 캐릭터 CRUD (이름 35자, 프롬프트 16000자, 프로필 이미지)
- [x] 오프닝 CRUD (제목, 내용, 기본값, 순서, 초기 장소/시간/캐릭터)
- [x] 로어북 CRUD (키워드, 내용, 우선순위, 조건부 활성화)
- [x] 세계관 설정 (10000자)
- [x] 작품 검색 (제목/설명/태그)

### AI 채팅
- [x] 세션 생성 (오프닝 선택, 페르소나 적용)
- [x] Gemini 2.5-Flash 기반 응답 생성
- [x] 멀티캐릭터 동시 응답
- [x] 나레이션 + 캐릭터 대사 + 장면 업데이트 파싱
- [x] 표정/감정 태그 처리 (8종)
- [x] Exponential Backoff 재시도 (최대 8회)
- [x] 폴백 응답 (AI 실패 시)
- [x] 첫 등장 캐릭터 외모 묘사 가이드

### 메모리 시스템
- [x] Mem0 벡터 기억 (캐릭터별 유저 기억)
- [x] 다중 캐릭터 병렬 기억 검색
- [x] 기억 캐싱 (10턴/5분마다 갱신)
- [x] 서사 기억 Scene 관리 (시작/종료/업데이트)
- [x] ConversationLog 원본 대화 보관
- [x] UserCharacterRelationship 추적
- [x] 캐릭터별 해석 기억 (CharacterMemory)
- [x] 관계 변화 기록 (RelationshipChange)

### 커뮤니티
- [x] 작품 좋아요 (토글, 알림 생성)
- [x] 댓글 시스템 (생성/수정/삭제, 대댓글)
- [x] 댓글 좋아요
- [x] 댓글 신고
- [x] 팔로우/언팔로우 (자기 팔로우 방지)
- [x] 알림 시스템 (전체/개인, 읽음 처리)

### 관리자
- [x] 대시보드 통계 (유저, 작품, 세션, 메시지, 신고)
- [x] 배너 CRUD (기간 설정, 활성/비활성)
- [x] 공지사항 CRUD (타입, 고정, 활성)
- [x] 유저 역할 관리 (자기 강등 방지)

### 인프라 & 품질
- [x] Vercel 배포
- [x] Neon PostgreSQL 연동
- [x] Prisma 싱글톤 패턴
- [x] Error Boundary (루트, 채팅, 스튜디오)
- [x] DB 복합 인덱스 4개
- [x] .env.example 전체 문서화
- [x] CLAUDE.md 프로젝트 가이드

---

## 미완료 구현 (Do - Pending)

### P0 (즉시) - ✅ 완료
- [x] Rate Limiting 미들웨어 (src/middleware.ts - IP 기반, 엔드포인트별 차등 제한)
- [x] 이미지 업로드 클라우드 전환 (Vercel Blob Storage - upload/imageGeneration 모두 적용)

### P1 (높음)
- [ ] 채팅 스트리밍 응답 (SSE)
- [ ] 기억 강도 감소 로직 (CharacterMemory.strength)
- [ ] 세션 요약 자동 생성 (ChatSession.sessionSummary)
- [ ] Mem0 메모리 Pruning 전략
- [ ] GeneratedImageCache 활용

### P2 (중간)
- [ ] 홈페이지 컴포넌트 분리 (2731줄 → 모듈화)
- [ ] PersonaManager/PersonaModal 통합
- [ ] Header.tsx 레거시 제거
- [ ] 신고 관리 관리자 UI
- [ ] SiteSetting API 및 UI

### P3 (낮음)
- [ ] useCallback/useMemo 성능 최적화
- [ ] Next.js Image 컴포넌트 적용
- [ ] 접근성 (aria-label, role) 강화
- [ ] 구조화된 로깅 (외부 서비스)
- [ ] E2E 테스트
